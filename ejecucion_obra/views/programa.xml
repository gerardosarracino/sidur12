<odoo>
    <data>

     <record model="ir.ui.view" id="programa_tree">
      <field name="name">proceso.elaboracion_contrato.tree3</field>
      <field name="model">partidas.partidas</field>
      <field name="arch" type="xml">
        <tree create="false">
            <field name="numero_contrato"/>
            <field name="obra"/>
            <field name="programaInversion" />
            <field name="monto_partida" />
            <field name="iva_partida" />
            <field name="total_partida" />
        </tree>
      </field>
    </record>

    <record model="ir.ui.view" id="programa_form">
      <field name="name">Ruta critica</field>
      <field name="model">partidas.partidas</field>
      <field name="arch" type="xml">
        <form>
            <sheet>
                    <div  class="oe_button_box oe_read_only" name="button_box">
                        <button name="abrir_obra" class="oe_inline oe_stat_button" type="object"
                             string="Programa"
                             icon="fa-clock-o"
                             />
                     </div>

                  <group string="Nombre de la Obra:">
                            <field name="obra" nolabel="1"/>
                        </group>
                            <hr/>
                        <group colspan="2" col="5" context="{'default_ejercicio': obra.id}">
                            <separator string="Programa"/>
                            <separator string="Ejercicio" />
                            <separator string="Monto"/>
                            <separator string="Municipio"/>
                            <separator string="Localidad"/>
                        </group>
                        <group colspan="2" col="6">
                            <field name="programaInversion" readonly="True" string="" nolabel="1"/>
                            <field name="ejercicio" string="" nolabel="1"/>
                            <field name="total_partida" widget="monetary" string="" nolabel="1"/>
                            <field name="municipio" string="" nolabel="1"/>
                            <field name="localidad" string="" nolabel="1"/>
                        </group>
                          <hr/>
                        <group colspan="2" col="5">
                           <separator string="Fecha del Anticipo"/>
                           <separator string="Fecha del contrato"/>
                           <separator string="Fecha de Inicio Contractual"/>
                           <separator string="Fecha de Termino Contractual"/>
                           <separator string="Supervision Externa"/>
                        </group>
                        <group colspan="2" col="6">
                          <field name="fecha_anticipos" readonly="1" string="" nolabel="1"/>
                          <field name="fecha" string="" nolabel="1"/>
                          <field name="fechainicio" string="" nolabel="1"/>
                          <field name="fechatermino" string="" nolabel="1"/>
                          <field name="supervisionexterna1" string="" nolabel="1"/>
                        </group>
              </sheet>
            </form>
          </field>
        </record>

      <!--Programa trabajando agregar al boton para poder abrilo y agregar un contrador para saber cuantos convenios tiene esa partida-->
      <record id="vista_form_programa" model="ir.ui.view">
        <field name="name">Programa</field>
        <field name="model">partidas.partidas</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                   <group>
                       <group colspan="1" col="4">
                          <field name="fecha_inicio_programa" readonly="1"/>
                          <field name="fecha_termino_programa" readonly="1"/>
                          <field name="total_partida" readonly="True" widget="monetary"/>
                          <field name="restante_programa" readonly="1"/>
                       </group>
                           <field name="programa_contrato" widget='one2many'>
                             <control>
                                <create string="Agregar Periodo"/>
                             </control>
                             <tree editable="bottom">
                                 <field name="fecha_inicio"/>
                                 <field name="fecha_termino"/>
                                 <field name="monto" sum="Total:"/>
                             </tree>
                           </field>
                       </group>
                </sheet>
            </form>
        </field>
    </record>




    <record model="ir.actions.act_window" id="programa_record">
          <field name="name">Programa</field>
          <field name="type">ir.actions.act_window</field>
          <field name="res_model">partidas.partidas</field>
          <field name="target">current</field>
          <field name="view_mode">tree</field>
         <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('programa_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('programa_form')})]"/>
    </record>

     <menuitem name="Programa de obra" id="programa_obra" parent="ejecucion_obra.menu_root"
              action="programa_record" sequence="0"/>

    </data>
</odoo>