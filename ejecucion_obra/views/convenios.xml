<odoo>
    <data>
        <record model="ir.ui.view" id="proceso_convenios">
          <field name="name">proceso.convenios_modificados.form</field>
          <field name="model">proceso.convenios_modificado</field>
          <field name="arch" type="xml">
            <form>
                <sheet>
                    <group>

                       <group string="Convenios Modificatorios" colspan="2" col="2">
                           <field name="contrato"/>
                           <field name="name_convenios" class="oe_inline"/>
                       </group>
                       <group colspan="2" col="4">
                           <field name="fecha_convenios" class="oe_inline"/>
                           <field name="fecha_dictamen" class="oe_inline"/>
                       </group>
                       <group colspan="2" col="2">
                           <field name="referencia" class="oe_inline"/>
                       </group>
                        <group colspan="2" col="4">
                           <field name="convenio_fecha_fianza"/>
                           <field name="convenio_numero_fianza"/>
                           <field name="convenio_afianzadora"/>
                           <field name="convenio_monto_afianzadora"/>
                        </group>
                        <group colspan="2" col="2">
                            <field name="observaciones"/>
                        </group>

                    </group>

                    <group colspan="2" col="2">
                        <group string="">
                            <field name="tipo_convenio" widget="radio"/>
                        </group>
                               <!-- PLAZO -->
                           <group string="Plazo" attrs="{'invisible': [('tipo_convenio','!=', '1')]}" colspan="2" col="2">
                               <hr/>
                           <field name="plazo_fecha_inicio" />
                           <field name="plazo_fecha_termino" />
                               <hr/>
                           </group>

                                <!-- OBJETO -->
                           <group string="Objeto" attrs="{'invisible': [('tipo_convenio','!=', '2')]}" colspan="2" col="2">
                               <hr/>
                           <field name="objeto_nuevo_objeto" />
                               <hr/>
                           </group>

                           <!-- MONTO -->
                           <group string="Monto" attrs="{'invisible': [('tipo_convenio','!=', '3')]}" colspan="2" col="2">
                               <hr/>
                           <field name="tipo_monto" />
                           <field name="monto_importe" />
                           <field name="monto_iva" />
                           <field name="monto_total" />
                               <hr/>
                           </group>

                           <!-- MONTO/PLAZO -->
                           <group string="Monto/Plazo" attrs="{'invisible': [('tipo_convenio','!=', '4')]}" colspan="2" col="2">
                               <hr/>
                           <field name="monto_plazo_fecha_inicio" />
                           <field name="monto_plazo_fecha_termino" />
                           <field name="tipo_monto_plazo" />
                           <field name="monto_plazo_importe" />
                           <field name="monto_plazo_iva" />
                           <field name="monto_plazo_total" />
                               <hr/>
                           </group>
                       </group>
                </sheet>
            </form>
          </field>
        </record>

    <record model="ir.ui.view" id="proceso_convenios_modificado_search">
         <field name="name">convenios modificados</field>
         <field name="model">proceso.convenios_modificado</field>
         <field name="arch" type="xml">
            <search>
                   <field name="contrato"/>
                   <field name="fecha_convenios"/>
                   <field name="referencia"/>
                   <field name="observaciones"/>

                   <field name="tipo_convenio"/>
                   <field name="monto_total" string="Monto"/>
                   <field name="plazo_fecha_inicio" />
                   <field name="plazo_fecha_termino" />
            </search>
         </field>
     </record>

     <!-- tree view -->
    <record model="ir.ui.view" id="proceso_convenios_modificados_tree">
      <field name="name">proceso.convenios_modificados.tree</field>
      <field name="model">proceso.convenios_modificado</field>
      <field name="arch" type="xml">
        <tree>
           <field name="contrato"/>
           <field name="fecha_convenios"/>
           <field name="referencia"/>
           <field name="observaciones"/>

           <field name="tipo_convenio" widget="radio"/>
           <field name="monto_total" string="Monto"/>
           <field name="plazo_fecha_inicio" />
           <field name="plazo_fecha_termino" />
        </tree>
      </field>
    </record>


    <record model="ir.actions.act_window" id="proc_convenios_action_window">
      <field name="name">Convenios</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">proceso.convenios_modificado</field>
      <field name="view_mode">tree,form</field>
        <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('proceso_convenios_modificados_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('proceso_convenios')})]"/>
    </record>


    <!--Partidas -->
    <record model="ir.ui.view" id="conve_programa_tree">
      <field name="name">proceso.elaboracion_contrato.tree3</field>
      <field name="model">partidas.partidas</field>
      <field name="arch" type="xml">
        <tree create="false">
            <field name="numero_contrato"/>
            <field name="obra"/>
            <field name="programaInversion" />
            <field name="monto_partida" />
            <field name="iva_partida" />
            <field name="total_partida" />
        </tree>
      </field>
    </record>

    <record model="ir.ui.view" id="conve_programa_form">
      <field name="name">Ruta critica</field>
      <field name="model">partidas.partidas</field>
      <field name="arch" type="xml">
        <form>
            <sheet>
                    <div  class="oe_button_box oe_read_only" name="button_box">
                         <button  type="action" name="%(proc_convenios_action_window)d" icon="fa-list-alt">
                            <span><field name="count_convenios_modif"/> Convenios modificatorios</span>
                         </button>
                     </div>

                  <group string="Nombre de la Obra:">
                            <field name="obra" nolabel="1"/>
                        </group>
                            <hr/>
                        <group colspan="2" col="5" context="{'default_ejercicio': obra.id}">
                            <separator string="Programa"/>
                            <separator string="Ejercicio" />
                            <separator string="Monto"/>
                            <separator string="Municipio"/>
                            <separator string="Localidad"/>
                        </group>
                        <group colspan="2" col="6">
                            <field name="programaInversion" readonly="True" string="" nolabel="1"/>
                            <field name="ejercicio" string="" nolabel="1"/>
                            <field name="total_partida" widget="monetary" string="" nolabel="1"/>
                            <field name="municipio" string="" nolabel="1"/>
                            <field name="localidad" string="" nolabel="1"/>
                        </group>
                          <hr/>
                        <group colspan="2" col="5">
                           <separator string="Fecha del Anticipo"/>
                           <separator string="Fecha del contrato"/>
                           <separator string="Fecha de Inicio Contractual"/>
                           <separator string="Fecha de Termino Contractual"/>
                           <separator string="Supervision Externa"/>
                        </group>
                        <group colspan="2" col="6">
                          <field name="fecha_anticipos" readonly="1" string="" nolabel="1"/>
                          <field name="fecha" string="" nolabel="1"/>
                          <field name="fechainicio" string="" nolabel="1"/>
                          <field name="fechatermino" string="" nolabel="1"/>
                          <field name="supervisionexterna1" string="" nolabel="1"/>
                        </group>
              </sheet>
            </form>
          </field>
        </record>

        <record model="ir.actions.act_window" id="conve_programa_record">
          <field name="name">Programa</field>
          <field name="type">ir.actions.act_window</field>
          <field name="res_model">partidas.partidas</field>
          <field name="target">current</field>
          <field name="view_mode">tree</field>
         <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('conve_programa_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('conve_programa_form')})]"/>
        </record>





     <menuitem name="Convenios modificatorios" id="convenios_obra" parent="ejecucion_obra.menu_root"
              action="conve_programa_record" sequence="3"/>

    </data>
</odoo>