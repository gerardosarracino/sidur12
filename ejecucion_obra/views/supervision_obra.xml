<odoo>
  <data>

    <record model="ir.ui.view" id="proceso_rutac_form">
    <field name="name">Proceso Ruta Critica</field>
    <field name="model">partidas.partidas</field>
    <field name="arch" type="xml">
        <form>
             <sheet>
                         <div class="panel panel-default">
                              <div class="panel-body">
                                <h3 colspan="2" align="center"> PROGRAMA DE FRENTES DE TRABAJO</h3>
                              </div>
                          </div>
                            <sheet>
                          <group>
                               <field name="ruta_critica" string="# Concepto de partidas" widget="section_and_note_one2many">
                                    <tree editable="bottom">
                                        <control>
                                            <create string="Agregar frente" context="{'default_display_type': 'line_section'}"/>
                                            <create string="Add a note" context="{'default_display_type': 'line_note'}"/>
                                            <create string="Agregar actividad"/>
                                        </control>
                                            <field name="name" widget="section_and_note_text" attrs="{'invisible':[('actividad','=',True)]}"/>
                                            <field name="sequence" type="handle" invisible="1"/>
                                            <field name="display_type" invisible="1"/>
                                            <field name="actividad"/>
                                            <field name="porcentaje_est" />
                                            <field name="avance_fisico" invisible="1" />
                                     </tree>

                                </field>

                                <group class="oe_subtotal_footer">
                                    <field string="PORCENTAJE PROGRAMADO" name="total_" class="oe_subtotal_footer_separator" />
                                </group>
                         </group>
                      </sheet>
             </sheet>
        </form>
    </field>
   </record>

      <record id="proceso_rc_tree" model="ir.ui.view">
          <field name="name">proceso_rc tree</field>
          <field name="model">partidas.partidas</field>
          <field name="arch" type="xml">
              <tree string="">
                   <field name="numero_contrato"/>
                    <field name="obra"/>
                    <field name="programaInversion" />
                    <field name="monto_partida" />
                    <field name="iva_partida" />
                    <field name="total_partida" />
              </tree>
          </field>
      </record>

    <record model="ir.ui.view" id="proc_contratacion_elaboracion_contrato_3">
      <field name="name">proceso.elaboracion_contrato.tree3</field>
      <field name="model">partidas.partidas</field>
      <field name="arch" type="xml">
        <tree create="false">
            <field name="numero_contrato"/>
            <field name="obra"/>
            <field name="programaInversion" />
            <field name="monto_partida" />
            <field name="iva_partida" />
            <field name="total_partida" />
        </tree>
      </field>
    </record>

 <record model="ir.actions.act_window" id="proceso_rutac">
      <field name="name">Ruta critica</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">partidas.partidas</field>
      <field name="target">current</field>
      <field name="view_mode">tree</field>
     <field name="view_ids" eval="[(5, 0, 0),
            (0, 0, {'view_mode': 'tree', 'view_id': ref('proceso_rc_tree')}),
            (0, 0, {'view_mode': 'form', 'view_id': ref('proceso_rutac_form')})]"/>
        </record>

      <record model="ir.actions.act_window" id="proceso_informe_avance">
          <field name="name">Informe de avance</field>
          <field name="type">ir.actions.act_window</field>
          <field name="res_model">proceso.iavance</field>
          <field name="view_mode">form,tree</field>
    </record>



      <record id="proceso_rc" model="ir.ui.view">
        <field name="name">Ruta critica</field>
        <field name="model">partidas.partidas</field>
        <field name="arch" type="xml">
            <form >
                <sheet>
                  <div class="oe_button_box oe_read_only" name="button_box" >
                      <button  name="%(proceso_informe_avance)d" type="action"
                         string="Informe de avance"
                         icon="fa-book"
                     />

                    <button name="%(proceso_rutac)d" type="action" context="{'search_default_name': active_id,
                        'default_name': active_id}" class="oe_button_box oe_read_only">
                        <field name="total_" string="Ruta critica" widget="percentpie"/>
                     </button>
                    </div>

                        <group string="Nombre de la Obra:">
                            <field name="obra" nolabel="1" readonly="1"/>
                        </group>
                            <hr/>
                        <group colspan="2" col="5" context="{'default_ejercicio': obra.id}">
                            <separator string="Programa"/>
                            <separator string="Ejercicio" />
                            <separator string="Monto"/>
                            <separator string="Municipio"/>
                            <separator string="Localidad"/>
                        </group>
                        <group colspan="2" col="6">
                            <field name="programaInversion" readonly="True" string="" nolabel="1"/>
                            <field name="ejercicio" string="" nolabel="1"/>
                            <field name="total_partida" widget="monetary" string="" nolabel="1"/>
                            <field name="municipio" string="" nolabel="1"/>
                            <field name="localidad" string="" nolabel="1"/>
                        </group>
                          <hr/>
                        <group colspan="2" col="5">
                           <separator string="Fecha del Anticipo"/>
                           <separator string="Fecha del contrato"/>
                           <separator string="Fecha de Inicio Contractual"/>
                           <separator string="Fecha de Termino Contractual"/>
                           <separator string="Supervision Externa"/>
                        </group>
                        <group colspan="2" col="6">
                          <field name="fecha_anticipos" readonly="1" string="" nolabel="1"/>
                          <field name="fecha" string="" nolabel="1"/>
                          <field name="fechainicio" string="" nolabel="1"/>
                          <field name="fechatermino" string="" nolabel="1"/>
                          <field name="supervisionexterna1" string="" nolabel="1"/>
                        </group>




                </sheet>
            </form>
        </field>
    </record>

      <record model="ir.actions.act_window" id="proceso_supervicion_obra">
      <field name="name">Contratos</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">partidas.partidas</field>
      <field name="view_mode">tree,form</field>
      <field name="view_ids" eval="[(5, 0, 0),
    (0, 0, {'view_mode': 'tree', 'view_id': ref('proc_contratacion_elaboracion_contrato_3')}),
    (0, 0, {'view_mode': 'form', 'view_id': ref('proceso_rc')})]"/>
    </record>



    <record model="ir.ui.view" id="proceso_informeAvance_form">
    <field name="name">Informe de avance</field>
    <field name="model">proceso.iavance</field>
    <field name="arch" type="xml">
        <form>
             <sheet>
                 <div class="panel panel-default">
                              <div class="panel-body">
                                <h3 colspan="2" align="center"> Informes de Avance del contrato: <field name="numero_contrato"/> </h3>
                              </div>
                          </div>
                      <sheet>
                          <group>
                               <sheet>
                                   <h4 colspan="2" align="left"> Comentarios generales: <field name="comentarios_generales"/> </h4>

                               </sheet>
                           </group>

                          <group>
                               <sheet>
                                  <h4 colspan="2" align="left"> Situación del contrato: <field name="situacion_contrato"/> </h4>
                               </sheet>
                           </group>

                          <group>
                                <field name="obra" invisible="True"/>

                               <field name="ruta_critica" string="# Concepto de partidas" widget="section_and_note_one2many">
                                    <tree editable="bottom">
                                            <field name="name" widget="section_and_note_text" attrs="{'invisible':[('actividad','=',True)]}"/>
                                            <field name="sequence" type="handle" invisible="1"/>
                                            <field name="display_type" invisible="1"/>
                                            <field name="actividad" readonly="True"/>
                                            <field name="porcentaje_est" readonly="True"/>
                                            <field name="avance_fisico"/>
                                     </tree>

                                </field>
                                <group class="oe_subtotal_footer">
                                    <field string="TOTALES" name="porcentaje_estimado" class="oe_subtotal_footer_separator" />
                                </group>
                         </group>
                      </sheet>
                  <group>
                       <sheet>
                          <h4 colspan="2" align="left"> Comentarios sobre el avance de obra: <field name="com_avance_obra"/> </h4>
                       </sheet>
                   </group>
             </sheet>
        </form>
    </field>
   </record>

    <menuitem name="Supervisión de Obra" id="supervicion_obra" parent="ejecucion_obra.menu_root"
              action="proceso_supervicion_obra" sequence="2"/>
  </data>
</odoo>