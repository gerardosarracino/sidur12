<odoo>
  <data>

    <record model="ir.ui.view" id="proceso_rutac_form">
    <field name="name">Proceso Ruta Critica</field>
    <field name="model">partidas.partidas</field>
    <field name="arch" type="xml">
        <form>
             <sheet>
                         <div class="panel panel-default">
                              <div class="panel-body">
                                <h3 colspan="2" align="center"> PROGRAMA DE FRENTES DE TRABAJO</h3>
                              </div>
                          </div>
                            <sheet>
                          <group>
                               <field name="ruta_critica" string="# Concepto de partidas" widget="section_and_note_one2many">
                                    <tree editable="bottom">
                                        <control>
                                            <create string="Agregar frente" context="{'default_display_type': 'line_section'}"/>
                                            <create string="Add a note" context="{'default_display_type': 'line_note'}"/>
                                            <create string="Agregar actividad"/>
                                        </control>
                                            <field name="name" widget="section_and_note_text" attrs="{'invisible':[('actividad','=',True)]}"/>
                                            <field name="sequence" type="handle" invisible="1"/>
                                            <field name="display_type" invisible="1"/>
                                            <field name="actividad"/>
                                            <field name="porcentaje_est" />
                                            <field name="xd"/>
                                     </tree>

                                </field>

                                <group class="oe_subtotal_footer">
                                    <field string="PORCENTAJE PROGRAMADO" name="total_" class="oe_subtotal_footer_separator" />
                                </group>
                         </group>
                      </sheet>
             </sheet>
        </form>
    </field>
   </record>

      <record id="proceso_rc_tree" model="ir.ui.view">
          <field name="name">proceso_rc tree</field>
          <field name="model">partidas.partidas</field>
          <field name="arch" type="xml">
              <tree string="">
                  <field name="ruta_critica"/>
                  <field name="obra"/>
                  <field name="programaInversion"/>
              </tree>
          </field>
      </record>

 <record model="ir.actions.act_window" id="proceso_rutac">
      <field name="name">Ruta critica</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">partidas.partidas</field>
      <field name="target">current</field>
      <field name="view_mode">tree</field>
     <field name="view_ids" eval="[(5, 0, 0),
            (0, 0, {'view_mode': 'tree', 'view_id': ref('proceso_rc_tree')}),
            (0, 0, {'view_mode': 'form', 'view_id': ref('proceso_rutac_form')})]"/>
        </record>

      <record id="proceso_rc" model="ir.ui.view">
        <field name="name">Ruta critica</field>
        <field name="model">partidas.partidas</field>
        <field name="arch" type="xml">
            <form >
                <sheet>
                  <div class="oe_button_box oe_read_only" name="button_box">
                    <button name="%(proceso_rutac)d" type="action" context="{'search_default_name': active_id,
                        'default_name': active_id}" class="oe_button_box oe_read_only">
                        <field name="total_" string="Ruta critica" widget="percentpie"/>
                     </button>
                  </div>

                    <group string="Partida">
                        <group colspan="2" col="6">
                          <field name="obra" readonly="True"/>
                          <field name="programaInversion" readonly="True"/>
                          <field name="monto_partida" readonly="True" widget="monetary"/>
                          <field name="iva_partida" readonly="True" widget="monetary"/>
                          <field name="total_partida" readonly="True" widget="monetary"/>
                        </group>
                    </group>

                    <group string="Catálogo de Niveles/Conceptos del Contrato">
                        <group colspan="2" col="6">
                            <group><field name="total" /></group>
                            <group> <field name="total_contrato"/></group>
                            <group><field name="diferencia"  class="o_light_label"/></group>
                        </group>
                    </group>

                        <field name="conceptos_partidas" string="# Concepto de partidas" readonly="True">
                            <tree>
                                <field name="categoria" />
                                <field name="concepto"/>
                                <field name="grupo"/>
                                <field name="medida"/>
                                <field name="precio_unitario" widget="monetary"/>
                                <field name="cantidad"/>
                                <field name="importe" sum="importe" widget="monetary"/>
                            </tree>
                        </field>
                </sheet>
            </form>
        </field>
    </record>

      <record model="ir.actions.act_window" id="proceso_supervicion_obra">
      <field name="name">Contratos</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">partidas.partidas</field>
      <field name="view_mode">tree,form</field>
      <field name="view_ids" eval="[(5, 0, 0),
    (0, 0, {'view_mode': 'tree', 'view_id': ref('proc_contratacion_elaboracion_contrato_3')}),
    (0, 0, {'view_mode': 'form', 'view_id': ref('proceso_rc')})]"/>
    </record>

    <menuitem name="Supervisión de Obra" id="supervicion_obra" parent="ejecucion_obra.menu_root"
              action="proceso_supervicion_obra" sequence="2"/>
  </data>
</odoo>